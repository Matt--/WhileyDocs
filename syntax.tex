% ======================================================
%\newcommand{\token}[1]{\;\texttt{"#1"}\;}
\definecolor{lightgray}{RGB}{215,215,215}
\newcommand{\token}[1]{\fcolorbox{black}{lightgray}{\strut\texttt{#1}}}

% --- tokens ---

\newcommand{\nullc}{\token{null}}
\newcommand{\comma}{\token{,}}
\newcommand{\colont}{\token{:}}
\newcommand{\dott}{\token{.}}
\newcommand{\lb}{\token{(}\;}
\newcommand{\rb}{\;\token{)}}
\newcommand{\ra}{\token{=>}}
\newcommand{\lsb}{\token{[}\;}
\newcommand{\rsb}{\;\token{]}}
\newcommand{\lcb}{\token{\{}\;}
\newcommand{\rcb}{\;\token{\}}}
\newcommand{\vbar}{\token{|}}
% ======================================================

\chapter{Syntax}

\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
e & $::=$ & & {\em // Expressions}\\
&{\huge\strut}$|$&$ b $ & {\em // Boolean constants}\\

&{\huge\strut}$|$&$ i $ & {\em // Integer constants}\\

&{\huge\strut}$|$&$ r $ & {\em // Rational constants}\\

&{\huge\strut}$|$&$ n $ & {\em // Variables}\\

&{\huge\strut}$|$& $\nullc$ & {\em // Null constant}\\

&{\huge\strut}$|$&$ e_1\;(\;\comma\;e_i\;)^+$ & {\em // Tuple expressions}\\

&{\huge\strut}$|$&$ \lb e \rb $ & {\em // Bracketed expressions}\\

&{\huge\strut}$|$&$ \vbar\;e\;\vbar  $ & {\em // Size expressions}\\

&{\huge\strut}$|$&$ e_1\;\lsb e_2\rsb $ & {\em // Index Expressions}\\

&{\huge\strut}$|$&$ e\;\dott\;n $ & {\em // Access Expressions}\\

&{\huge\strut}$|$&$ (\;\token{-}\;|\;\token{!}\;|\;\token{\~}\;|\;\token{\&}\;|\;\token{*}\;)\;e $ & {\em // Unary expressions}\\

&{\huge\strut}$|$&$ e_1\;[\;op^2\;e_2\;]^+ $ & {\em // Binary expressions}\\

&{\huge\strut}$|$&$ e\;\lb\;\overline{e}\;\rb $ & {\em // Invocation expressions}\\

&{\huge\strut}$|$&$ \token{new}\;e $ & {\em // Allocation expressions}\\

&{\huge\strut}$|$&$ \lsb [\;e_1\;(\;\comma\;\;e_i\;)^*\;]\rsb $ & {\em // List expressions}\\

&{\huge\strut}$|$&$ \lcb [\;e_1\;(\;\comma\;\;e_i\;)^*\;]\rcb $ & {\em // Set expressions}\\

&{\huge\strut}$|$&$ \lcb [\;n_1\colont\;e_1\;(\;\comma\;\;n_i\;\colont\;e_i\;)^*\;]\rcb $ & {\em // Record expressions}\\

&{\huge\strut}$|$&$ \lcb [\;e^k_1\;\ra\;e^v_1\;(\;\comma\;\;e^k_i\;\ra\;e^v_i\;)^*\;]\rcb $ & {\em // Map expressions}\\

&{\huge\strut}$|$&$ \{ e_1\;|\;\overline{n\;in\;e}, e_2\} $ & {\em // Comprehension expressions}\\
&&&\\
$op^2$ & $::=$ & $\token{+}\;|\;\token{-}\;|\;\token{*}\;|\;\token{/}$& {\em // Binary Operators}\\
\end{tabular}}
\caption{Syntax for Expressions}
\end{figure}