% ======================================================
%\newcommand{\token}[1]{\;\texttt{"#1"}\;}
\definecolor{lightgray}{RGB}{215,215,215}
\newcommand{\token}[1]{\fcolorbox{black}{lightgray}{\strut\texttt{#1}}}

% --- tokens ---

\newcommand{\nullc}{\token{null}}
\newcommand{\comma}{\token{,}}
\newcommand{\colont}{\token{:}}
\newcommand{\dott}{\token{.}}
\newcommand{\lb}{\token{(}\;}
\newcommand{\rb}{\;\token{)}}
\newcommand{\ra}{\token{=>}}
\newcommand{\lsb}{\token{[}\;}
\newcommand{\rsb}{\;\token{]}}
\newcommand{\lcb}{\token{\{}\;}
\newcommand{\rcb}{\;\token{\}}}
\newcommand{\vbar}{\token{|}}
% ======================================================

\chapter{Syntax}

\section{Compilation Units}
\section{Declarations}
\section{Types}
\subsection{Primitives}
\subsection{Collection Types}
\subsection{Union Types}
\subsection{Intersection Types}
\subsection{Negation Types}
\subsection{Reference Types}

\section{Statements}
\subsection{Variable Declarations}
\subsection{Assign Statements}
\subsection{Return Statements}
\subsection{If/Else Statements}
\subsection{While Statements}
\subsection{Do/While Statements}
\subsection{For Statements}
\subsection{Switch Statements}
\subsection{Try/Catch Statements}



\section{Expressions}
\subsection{Binary Expressions}
\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
Expr & $::=$ & $ Cond\;[\;(\;\token{\&\&}\;|\;\token{||}\;)\;Expr\;] $ & {\em // Expressions}\\
&&&\\
Cond & $::=$ & $ Append\;[\;Cop\;Expr\;] $ & {\em // Condition Expressions}\\
&&&\\
Append & $::=$ & $ Range\;[\;\token{++}\;Expr\;] $ & {\em // Append Expressions}\\
&&&\\
Range & $::=$ & $ AddSub\;[\;\token{..}\;Expr\;] $ & {\em // Range Expressions}\\
&&&\\
AddSub & $::=$ & $
MulDiv\;[\;(\;\token{+}\;|\;\token{-}\;)\;Expr\;] $ & {\em //
  Additive Expressions}\\
&&&\\
MulDiv& $::=$ & $
Index\;[\;(\;\token{*}\;|\;\token{/}\;|\;\token{\%}\;)\;Expr\;] $ & {\em //
Multiplicative Expressions}\\

&&&\\
Index& $::=$ & ??? & {\em //
Index Expressions}\\
\end{tabular}}
\caption{Syntax for Binary Expressions}
\end{figure}



\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
Term& $::=$ & {\em // Terms} \\
&{\huge\strut}$|$& $Constant$ & {\em // Constant expressions}\\
&{\huge\strut}$|$& $Identifier$ & {\em // Identifier expressions}\\
&{\huge\strut}$|$&$ Expr_1\;(\;\comma\;Expr_i\;)^+$ & {\em // Tuple expressions}\\

&{\huge\strut}$|$&$ \lb Expr \rb $ & {\em // Bracketed expressions}\\

&{\huge\strut}$|$&$ \vbar\;Expr\;\vbar  $ & {\em // Size expressions}\\

&{\huge\strut}$|$&$ Identifier\;\lb\;[\;Expr_1\;(\;\comma\;Expr_i\;)^+\;]\;\rb $ & {\em // Invocation expressions}\\

&{\huge\strut}$|$&$
(\;\token{-}\;|\;\token{!}\;|\;\token{\~}\;|\;\token{\&}\;|\;\token{*}\;)\;Expr
$ & {\em // Unary expressions}\\

&{\huge\strut}$|$&$ \token{new}\;Expr $ & {\em // Allocation expressions}\\

&{\huge\strut}$|$&$ \lcb [\;Expr_1\;(\;\comma\;\;Expr_i\;)^*\;]\rcb $ & {\em
  // Set expressions}\\

&{\huge\strut}$|$&$ \lcb [\;Expr_1\:\token{=>}\:Expr'_1\;(\;\comma\;\;Expr_i\:\token{=>}\:Expr'_i\;)^*\;]\rcb $ & {\em
  // Map expressions}\\

&{\huge\strut}$|$&$ \lsb [\;Expr_1\;(\;\comma\;\;Expr_i\;)^*\;]\rsb $ & {\em // List expressions}\\

&{\huge\strut}$|$&$ \lcb [\;n_1\colont\;Expr_1\;(\;\comma\;\;n_i\;\colont\;Expr_i\;)^*\;]\rcb $ & {\em // Record expressions}\\
\end{tabular}}
\caption{Syntax for Term Expressions}
\end{figure}


\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
Constant& $::=$ & {\em // Constants} \\
&{\Huge\strut}$|$&$ (\;\token{0}\;|\;\token{1}\;)^+\;\token{b} $ & {\em // Boolean constants}\\

&{\Huge\strut}$|$&$ (\;\token{0-9}\;)^+ $ &
{\em // Integer constants}\\

&{\Huge\strut}$|$&$ (\;\token{0-9}\;)^+\;\dott\;(\;\token{0-9}\;)^+$ &
{\em // Decimal constants}\\

&{\Huge\strut}$|$& $\nullc$ & {\em // Null constant}\\
\end{tabular}}
\caption{Syntax for Constant Expressions}
\end{figure}

\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
Identifier& $::=$ & $ (\;\token{\_}\;|\;\token{a-z}\;|\;\token{A-Z}\;)\;(\;\token{\_}\;|\;\token{a-z}\;|\;\token{A-Z}\;|\;\token{0-9}\;)^* $ & {\em // Identifiers}\\


\end{tabular}}
\caption{Syntax for Identifiers}
\end{figure}

