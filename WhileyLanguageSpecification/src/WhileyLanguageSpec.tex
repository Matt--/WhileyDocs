\documentclass[10pt]{book}

\usepackage{times}
\usepackage{graphicx}
\usepackage{url} % for typesetting urls
\usepackage{color}
\usepackage{fancybox}
\usepackage{framed}
\usepackage{hyperref}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage[a4paper,lmargin=35mm,tmargin=35mm,bmargin=35mm,rmargin=35mm,twoside=false,marginpar=30mm]{geometry}

\input{glossary}

\input{listings}

\title{\Huge The Whiley Language Specification}

\author{David J. Pearce\\School of Engineering
  and Computer Science\\Victoria University of Wellington, New
  Zealand\\djp@ecs.vuw.ac.nz}

% ======================================================
%\newcommand{\token}[1]{\;\texttt{"#1"}\;}
\definecolor{lightgray}{RGB}{215,215,215}
\newcommand{\token}[1]{\fcolorbox{black}{white}{\strut\texttt{#1}}}

% --- tokens ---

\newcommand{\nullc}{\token{null}}
\newcommand{\comma}{\token{,}}
\newcommand{\colont}{\token{:}}
\newcommand{\dott}{\token{.}}
\newcommand{\lb}{\token{(}\;}
\newcommand{\rb}{\;\token{)}}
\newcommand{\ra}{\token{=>}}
\newcommand{\lsb}{\token{[}\;}
\newcommand{\rsb}{\;\token{]}}
\newcommand{\lcb}{\token{\{}\;}
\newcommand{\rcb}{\;\token{\}}}
\newcommand{\vbar}{\token{|}}
% ======================================================

% SETUP THE MARGINPAR
\setlength{\marginparwidth}{1cm}
\let\oldmarginpar\marginpar
\renewcommand\marginpar[1]{\-\oldmarginpar[\raggedright\footnotesize #1]%
{\raggedleft\footnotesize #1}}
\newcommand{\hl}[2]{\marginpar{\tiny #1}\colorbox{yellow}{#2}}
%\newcommand{\hl}[2]{#2}

% ======================================================

% \newenvironment{syntax}[1]{
%   \begin{center}
%     \begin{minipage}{0.8\textwidth}
%       \centering
% }{\end{minipage}\end{center}}
\newenvironment{syntax}{
  \def\FrameCommand{\fboxsep=\FrameSep \fcolorbox {black}{lightgray}}
    \begin{framed}
      \noindent\begin{minipage}{0.9\textwidth}
        \begin{tabular}{rcl}
        }{\end{tabular}\end{minipage}\end{framed}}

\begin{document}
\maketitle
\tableofcontents

\input{introduction}
\input{lexical}
\input{compilation-units}
\input{types}
\input{statements}
\input{expressions}

\printglossaries

\bibliographystyle{unsrt}
\bibliography{abbrevs,references}

\end{document}
